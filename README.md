# Effective Mobile Subscription Service

–°–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–æ–¥—Å—á—ë—Ç –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–æ–∫.

---

## ‚öôÔ∏è –ü—Ä–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–º –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ Effective Mobile. –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏ –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã –∑–∞–º–µ—á–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏. –Ø –Ω–µ —Å–º–æ–≥ —Å–Ω–æ–≤–∞ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –∫–æ–º–ø–∞–Ω–∏–µ–π, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –Ω–µ –¥–æ–ø—É—Å–∫–∞—é—Ç –ø—Ä–∞–≤–∫—É –∫–æ–¥–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –ø–æ–ø—ã—Ç–∫–∏, –Ω–æ –≤—Å–µ-—Ç–∞–∫–∏ —Ä–µ—à–∏–ª –∑–∞–∫–æ–Ω—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç. üê∏

---



## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üîß –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
cd docker
docker compose up -d (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Å–µ .env —Ñ–∞–π–ª—ã!!!)
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
`http://localhost:8082`

Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
`http://localhost:8082/swagger/index.html`

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä `.env` —Ñ–∞–π–ª–∞ –¥–ª—è —Å–∞–º–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```
#<-------------------------->
#PostgreSql Conn

DB_URL="postgres://username:password@database:db_port/db_name"

#<-------------------------->


#<-------------------------->
#App Conn
IP=ip
PORT=port
#<-------------------------->


```

–ü—Ä–∏–º–µ—Ä `.env` —Ñ–∞–π–ª–∞ –¥–ª—è docker-compose (postgres):

```
#<-------------------------->
#PostgreSql

POSTGRES_USER=username
POSTGRES_PASSWORD=password
POSTGRES_DB=db_name
POSTGRES_PORT=db_port

#<-------------------------->

#<-------------------------->
#App

APP_PORT=app_port
TZ=tz (example: Europe/Moscow)
LOG_LEVEL=lvl
#<-------------------------->


#<-------------------------->
#Migrate

DB_URL="postgres://username:password@database:db_port/db_name?sslmode=disable"

#<-------------------------->

```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ cmd/           # main.go ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ docker/        # Dockerfile –∏ docker-compose
‚îÇ	‚îî‚îÄ‚îÄ .env (–í—ã –¥–æ–ª–∂–Ω—ã –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å!!) # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è postgres
‚îú‚îÄ‚îÄ handlers/      # HTTP endpoints
‚îú‚îÄ‚îÄ logger/        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ logs/          # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º—ã–µ –ª–æ–≥–∏
‚îú‚îÄ‚îÄ models/        # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ repository/    # SQL-–∑–∞–ø—Ä–æ—Å—ã, —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π
‚îú‚îÄ‚îÄ router/        # –ú–∞—Ä—à—Ä—É—Ç—ã Gin
‚îú‚îÄ‚îÄ service/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ .env (–í—ã –¥–æ–ª–∂–Ω—ã –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å!!) # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å–∞–º–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ LICENSE
‚îú‚îÄ‚îÄ README.md
```

---

## üß© –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Go
- Gin
- PostgreSQL
- Swagger (`swaggo`)
- Docker + docker-compose
- zerolog

---

## üìä –û–ø–∏—Å–∞–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                     | –û–ø–∏—Å–∞–Ω–∏–µ                                                                               | –ü—Ä–∏–º–µ—Ä                                                                                                                                                                                                                                                                     |
| ---------- | ---------------------------- | ---------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| POST       | /api/v1/create-subs          | –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É                                                                | curl -X POST http://localhost:8082/api/v1/create-subs   -H "Content-Type: application/json"   -d '{<br />"service_name": "Netflix",<br />"price": 499,<br />"user_id": "60601fee-2bf1-4721-ae6f-7636e79a0cba",<br />"start_date": "09-2022",<br />"end_date": "12-2022"<br />}'  |
| PUT        | /api/v1/update-subs/:user_id | –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É                                                              | curl -X POST http://localhost:8082/api/v1/create-subs   -H "Content-Type: application/json"   -d '{<br />"service_name": "Spotify",<br />"price": 1000,<br />"user_id": "60601fee-2bf1-4721-ae6f-7636e79a0cba",<br />"start_date": "09-2022",<br />"end_date": "12-2022"<br />}' |
| GET        | /api/v1/get-subs/:user_id    | –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –ø–æ user_id                                                 | curl "http://localhost:8082/api/v1/get-subs/60601fee-2bf1-4721-ae6f-7636e79a0cba"                                                                                                                                                                                                |
| DELETE     | /api/v1/delete-subs/:user_id | –£–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –ø–æ user_id                                                   | curl -X DELETE "http://localhost:8082/api/v1/delete-subs/60601fee-2bf1-4721-ae6f-7636e79a0cba"                                                                                                                                                                                   |
| GET        | /api/v1/get-subs             | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏                                                       | curl "http://localhost:8082/api/v1/get-subs"                                                                                                                                                                                                                                     |
| GET        | /api/v1/get-sum-subs         | –ü–æ–ª—É—á–∏—Ç—å —Å—É–º–º—É —Å –ø–æ–¥–ø–∏—Å–æ–∫<br />–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ. | curl "http://localhost:8082/api/v1/get-sum-subs?user_id=user_id": "60601fee-2bf1-4721-ae6f-7636e79a0cba"                                                                                                                                                                         |

---

## üêõ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `logs/`
- –û–¥–∏–Ω —Ñ–∞–π–ª ‚Äî –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å

## ‚ÑπÔ∏è –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```
const (
    TraceLevel = iota  // 0
    DebugLevel         // 1
    InfoLevel          // 2
    WarnLevel          // 3
    ErrorLevel         // 4
    FatalLevel         // 5
    PanicLevel         // 6
    Disabled           // 7 (–æ—Ç–∫–ª—é—á–∞–µ—Ç –≤—Å—ë)
) 
```

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License. –°–º. —Ñ–∞–π–ª `LICENSE`.

---

## üìÑ –ê–≤—Ç–æ—Ä

Ummuys / –ï–≥–æ—Ä–æ–≤ –ï–≤–≥–µ–Ω–∏–π
